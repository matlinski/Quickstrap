<!-- $GLOBALS["bg-color"] = "50%, 0%, 0%";
    $GLOBALS["tx-color"] = "100%, 100%, 100%"; -->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <style>
        html {
            scroll-behavior: smooth;
        }

        .type-js {
            background: linear-gradient(180deg, rgba(0, 0, 0, 0.75) 0%, rgba(89, 8, 67, 0.75) 51%, rgba(42, 5, 57, 0.0) 100%);
            border: 0px;
            color: white;
            z-index: 150 !important;
            position: fixed;
            top: 0;
        }

        .type-js:focus {
            background: linear-gradient(180deg, rgba(60%, 60%, 60%, 0.75) 0%, rgba(158, 84, 138, 0.75) 51%, rgba(88, 68, 95, 0.4) 100%);
            outline: 0;
        }

        #result {
            margin-top: 3rem;
        }

        #result::before {
            content: '';
            position: fixed;
            top: 0;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(180deg, rgba(42, 5, 57, 0.75) 0%, rgba(89, 8, 67, 0.75) 51%, rgba(226, 0, 61, 0.75) 100%);
            ;
            z-index: 99;
            transition: 500ms;
        }

        .menu {
            position: fixed;
            top: 50%;
            left: 50%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transform: translate(-50%, -50%) skew(-5deg, 0deg);
            background: rgba(0, 0, 0, 0.8);
            z-index: 100;
            padding: 2rem;
            border-radius: 1rem 0 1rem 0;
        }

        .menu::before,
        .menu::after {
            content: '';
            background: rgba(0, 0, 0, 0.2);
            position: fixed;
            height: 100vh;
            width: 30vw;
        }

        .menu::before {
            left: -120%;
        }

        .menu::after {
            left: 130%;
        }

        .menu a {
            display: block;
            padding: 2rem 0;
            width: 100%;
            border: yellow solid 1px;
            border-radius: 4px;
            font-size: 1.5rem;
            color: yellow;
            text-align: center;
            transition: 500ms;
            background: rgba(0, 0, 0, 0.5)
        }

        .menu a:hover,
        .menu a:hover {
            text-decoration: none;
            background: rgba(255, 0, 221, 0.25)
        }

        .remove::before {
            opacity: 0 !important;
        }

        .remove::after {
            opacity: 0 !important;
        }

        .hide {
            opacity: 0;
            z-index: 0;
        }

        .desaturate {
            background: linear-gradient(180deg, rgba(87, 68, 68, 0.75) 0%, rgba(199, 164, 189, 0.75) 51%, rgb(255, 255, 255) 100%) !important;
            color: black;
        }

        .autocomplete-items {
            z-index: 999;
            position: fixed;
            right: 20px;
            bottom: 20px;
        }

        .autocomplete-items>div {
            padding: 0.5rem;
            font-size: 0.8rem;
        }

        .autocomplete-items>*:focus {
            background: white !important;
            cursor: pointer;
        }

        .autocomplete-active {
            background: white;
        }

        .autocomplete-items>*:hover {
            background: rgb(177, 216, 177);
            cursor: pointer;
        }
    </style>
</head>

<body>



    <form autocomplete="off">
        <div class="autocomplete" style="width:300px;">
            <textarea name="" class="col type-js" id="user-code" rows="2"></textarea>
        </div>
    </form>








    <div id="result"></div>

    <div class="menu col-10 col-md-6 col-lg-4">
        <a href="#acc">ACCEDER</a>
        <a href="#rag">REGISTRAR</a>
        <a href="#man">MANUAL</a>
    </div>























    <script src="https://code.jquery.com/jquery-3.3.1.js">
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
    <script>
        $('body').scrollspy(['target: scroll']);
        $('#user-code').trigger('focus')
        $('[data-toggle="popover"]').popover()
        $('[data-toggle="tooltip"]').tooltip()
        $('.dropdown-toggle').dropdown()
        $('.toast').toast('show')
    </script>
    <script type="module">
        import { Button, Alert, Badge, Breadcrumb, Card, Carousel, Input, Jumbotron, Media, Modal, Navbar, Navs, Pagination, Progress, Scrollspy, Spinner, Toast/*, HTML */ } from './library.js'
        import HTML from './utilities/HTML.func.js'

        var helpRequest = false;

        $('#user-code').keyup(function (e) {
            $('#result').html(eval($('#user-code').val()));
        })

        function autoType(text, elementClass, typingSpeed) {
            var thhis = $(elementClass);
            var text = ('A' + text).trim().split('');
            var amntOfChars = text.length;
            var newString = "";
            thhis.val("|");
            setTimeout(function () {
                thhis.val("");
                for (var i = 0; i < amntOfChars - 1; i++) {
                    (function (i, char) {
                        var textAuto = setTimeout(function () {
                            newString += text[i];
                            thhis.val(newString);
                            $('#result').html(eval(newString));
                        }, (i + 1) * typingSpeed);
                        $('.type-js').focus(function () {
                            clearTimeout(textAuto);
                        })
                    })(i + 1, text[i]);
                }
            }, 600)

            setTimeout(function () {
                window.scrollTo(0, document.body.scrollHeight);
            }, text.length * typingSpeed + 3000)

        }
        $('.type-js').focus(function () {
            $('#result').addClass('remove')
            $('.menu').addClass('remove')
            $('.menu').addClass('hide')
            $('.type-js').addClass('desaturate')

        })
        $('.type-js').blur(function () {
            $('#result').removeClass('remove')
            $('.menu').removeClass('remove')
            $('.menu').removeClass('hide')
            $('.type-js').removeClass('desaturate')
        })
        autoType(`Navbar(['<h1>ExeCorp</h1>'+Navs()])+Carousel({template: 'mb-3'})+'<div class="container">'+Media()+Media({reverse: true})+Media()+'</div>'`, ".type-js", 50);




        function autocomplete(inp, arr, arrHint) {
            var currentFocus;
            inp.addEventListener("input", function (e) {
                var a, b, i, icon, val = this.value;
                val = val.split('+');
                var valArray = val;
                val = valArray.pop();
                closeAllLists();
                if (!val) { return false; }
                currentFocus = -1;
                a = document.createElement("DIV");
                var x = document.createElement("button");
                var x2 = document.createElement("b");
                x.setAttribute("type", 'button');
                x.setAttribute("class", 'close');
                x.setAttribute("data-dismiss", 'alert');
                x.setAttribute("aria-label", 'close');
                x2.setAttribute("aria-hidden", 'true');
                if (helpRequest) {
                    x2.setAttribute("id", "helpAccepted");
                    icon = document.createTextNode("Ã—")
                } else {
                    x2.setAttribute("id", "helpDenied");
                    icon = document.createTextNode("?")
                }
                x2.appendChild(icon);
                x2.setAttribute("class", "float-right px-3 py-2 h2");
                a.setAttribute("id", this.id + "autocomplete-list");
                a.setAttribute("class", "autocomplete-items alert alert-success fade show p-0");
                a.appendChild(x);
                a.appendChild(x2);
                this.parentNode.appendChild(a);
                if (helpRequest) {
                    document.querySelector('#helpAccepted').addEventListener('click', function () {
                        helpRequest = false;
                        inp.focus();
                    })
                } else {
                    document.querySelector('#helpDenied').addEventListener('click', function () {
                        helpRequest = true;
                        inp.focus();
                    })
                }

                if (!val.match(arr[arr.length - 1])) {
                    for (i = 0; i < arr.length; i++) {
                        b = document.createElement("DIV");
                        if (val.toUpperCase().includes(arr[i].substr(0, val.length).toUpperCase()) && !(val.includes('<') || val.includes('>'))) {
                            if (helpRequest) {
                                b.innerHTML = arrHint[i];
                            }
                            b.innerHTML += "<input type='hidden' value='" + arrHint[i] + "'>";
                            b.addEventListener("click", function (e) {
                                valArray.push(this.getElementsByTagName("input")[0].value)
                                inp.value = valArray.join('+');
                                $('#result').html(eval(valArray.join('+')));
                                closeAllLists();
                                inp.focus();
                            });
                            a.appendChild(b);
                        }
                    }
                } else {
                    b = document.createElement("DIV");
                    if (helpRequest) {
                        b.innerHTML = arrHint[arrHint.length - 1].replace('tag', val.match(arr[arr.length - 1])[1])
                    }
                    b.innerHTML += "<input type='hidden' value='" + arrHint[arrHint.length - 1].replace('tag', val.match(arr[arr.length - 1])[1]) + "'>";
                    b.addEventListener("click", function (e) {
                        valArray.push(this.getElementsByTagName("input")[0].value)
                        inp.value = valArray.join('+');
                        $('#result').html(eval(valArray.join('+')));
                        closeAllLists();
                        inp.focus();
                    });
                    a.appendChild(b);
                }
            });
            inp.addEventListener("keydown", function (e) {
                var x = document.getElementById(this.id + "autocomplete-list");
                if (x) x = x.getElementsByTagName("div");
                if (e.keyCode == 40) {
                    /*If DOWN*/
                    currentFocus++;
                    addActive(x, currentFocus);
                } else if (e.keyCode == 38) { //up
                    /*If UP*/
                    currentFocus--;
                    /*and and make the current item more visible:*/
                    addActive(x, currentFocus);
                } else if (e.keyCode == 13) {
                    /*If ENTER*/
                    e.preventDefault();
                    if (currentFocus > -1) {
                        /*and simulate a click on the "active" item:*/
                        if (x) x[currentFocus].click();
                    }
                }
            });

            function closeAllLists(elmnt) {
                var x = document.getElementsByClassName("autocomplete-items");
                for (var i = 0; i < x.length; i++) {
                    if (elmnt != x[i] && elmnt != inp) {
                        x[i].parentNode.removeChild(x[i]);
                    }
                }
            }

            document.addEventListener("click", function (e) {
                closeAllLists(e.target);
            });
        }

        var functions = [
            "Alert",
            "Badge",
            "Breadcrumb",
            "Button",
            "Card",
            "Carousel",
            "Input",
            "Jumbotron",
            "Media",
            "Modal",
            "Navbar",
            "Navs",
            "Pagination",
            "Progress",
            "Scrollspy",
            "Spinner",
            "Toast",
            /(?:<)(\w+)(?:>)/i //(?:<)(\w+)\s?(\w+| \w+=(?:"|')[^"'].*[^"'](?:"|'))?(?:>)
        ];
        var functionsHint = [
            "Alert([\"content\", \"tag\", \"attr\", \"template\", \"dismisable\", \"style\"])",
            "Badge([\"content\", \"tag\", \"attr\", \"template\", \"style\"])",
            "Breadcrumb([[\"content\"], \"attr\", \"template\", \"separator\", \"style\"])",
            "Button([\"content\", \"tag\", \"attr\", \"template\", \"tooltip\", \"dropdown\", \"popover\", \"collapse\", \"style\"])",
            "Card([\"content\", \"tag\", \"attr\", \"template\", \"image\", \"style\"])",
            "Carousel([[\"content\"], \"tag\", \"attr\", \"template\", \"active\", \"controls\", \"indicators\", \"interval\", \"style\"])",
            "Input([\"content\", \"tag\", \"attr\", \"template\", \"label\", \"sticker\", \"global\", \"style\"])",
            "Jumbotron([\"header\", \"body\", \"tag\", \"attr\", \"template\", \"style\"])",
            "Media([\"content\", \"image\", \"tag\", \"attr\", \"template\", \"reverse\", \"style\"])",
            "Modal([\"header\", \"body\", \"footer\", \"tag\", \"attr\", \"template\", trigger_id, \"style\"])",
            "Navbar([\"content\", \"tag\", \"attr\", \"template\", \"style\"])",
            "Navs([[\"content\"], \"tag\", \"attr\", \"template\", \"active\", \"disabled\", \"style\"])",
            "Pagination([[\"content\"], \"tag\", \"attr\", \"template\", \"active\", \"inter\", \"style\"])",
            "Progress([\"progress\", \"attr\", \"template\", \"min\", \"max\", \"percent\", \"style\"])",
            "Scrollspy([[\"content\"], \"tag\", \"attr\", \"template\", \"reference_id\", \"style\"])",
            "Spinner([\"radius\", \"attr\", \"template\", \"style\"])",
            "Toast([\"header\", \"body\", \"attr\", \"template\", \"style\"])",
            "HTML(\"tag\",\"attr\", \"children\")"
        ];


        function addActive(x, currentFocus) {
            if (!x) return false;
            removeActive(x);
            if (currentFocus >= x.length) currentFocus = 0;
            if (currentFocus < 0) currentFocus = (x.length - 1);
            x[currentFocus].classList.add("autocomplete-active");
        }
        function removeActive(x) {
            for (var i = 0; i < x.length; i++) {
                x[i].classList.remove("autocomplete-active");
            }
        }









        autocomplete(document.getElementById("user-code"), functions, functionsHint);

        document.activeElement.blur();
    </script>
</body>

</html>